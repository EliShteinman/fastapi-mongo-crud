# תיעוד מניפסטים של Kubernetes/OpenShift

מדריך זה מסביר את התפקיד של כל אחד מקבצי ה-YAML בתיקייה זו, ואת האופן שבו הם מרכיבים יחד את תשתית האפליקציה. הפריסה כוללת שני מסלולים: `Deployment` (סטנדרטי) ו-`StatefulSet` (מתקדם למסדי נתונים).

---

### רכיבים משותפים (Commons)

#### `00-mongo-configmap.yaml`
*   **סוג:** `ConfigMap`
*   **מטרה:** אחראי על ניהול **תצורה שאינה סודית** עבור מסד הנתונים, כמו שם משתמש, שם מסד נתונים ושם האוסף.

#### `01-mongo-secret.yaml`
*   **סוג:** `Secret`
*   **מטרה:** מיועד לאחסון **מידע רגיש** בלבד, כמו סיסמת ה-root של מסד הנתונים.

---

### מסלול 1: פריסה עם `Deployment`

#### `02-mongo-pvc.yaml`
*   **סוג:** `PersistentVolumeClaim` (PVC)
*   **מטרה:** בקשה רשמית מ-OpenShift לקבל "דיסק קשיח" וירטואלי, כדי שהמידע של מסד הנתונים יישמר באופן קבוע.

#### `03-mongo-deployment.yaml`
*   **סוג:** `Deployment`
*   **מטרה:** ה-"שרטוט" הראשי להרצת מסד הנתונים. מגדיר איזה אימג' להריץ, ומחבר אותו ל-`ConfigMap`, ל-`Secret` ול-`PVC` שיצרנו. מכיל בדיקות בריאות (`probes`) וניהול משאבים (`resources`).

#### `04-mongo-service.yaml`
*   **סוג:** `Service`
*   **מטרה:** יוצר **כתובת רשת פנימית ויציבה** (`mongo-db-service`) עבור מסד הנתונים, כדי שה-API יוכל למצוא אותו.

#### `05-fastapi-deployment.yaml`
*   **סוג:** `Deployment`
*   **מטרה:** השרטוט להרצת אפליקציית ה-API. מגדיר איזה אימג' להריץ, ומזריק לו את כל פרטי החיבור ל-DB כמשתני סביבה.

#### `06-fastapi-service.yaml`
*   **סוג:** `Service`
*   **מטרה:** מספק כתובת רשת פנימית ויציבה עבור ה-API, שאליה ה-`Route` יפנה תעבורה.

#### `07-fastapi-route.yaml`
*   **סוג:** `Route`
*   **מטרה:** השער של האפליקציה לעולם החיצון. מקבל כתובת URL ציבורית ומנתב את התעבורה אל ה-`Service` של ה-API.

---

### מסלול 2: פריסה עם `StatefulSet`

#### `03a-mongo-statefulset.yaml`
*   **סוג:** `StatefulSet`
*   **מטרה:** חלופה ל-`Deployment` המיועדת ליישומים הדורשים זהות יציבה, כמו מסדי נתונים. הוא מנהל את יצירת ה-PVC **באופן אוטומטי** באמצעות `volumeClaimTemplates`.

#### `04a-mongo-headless-service.yaml`
*   **סוג:** `Service`
*   **מטרה:** `Headless Service` (עם `clusterIP: None`) שנדרש על ידי ה-`StatefulSet`. הוא מאפשר לתת לכל Pod ב-StatefulSet כתובת רשת ייחודית ויציבה.

#### קבצי ה-API החלופיים
הקבצים `05a`, `06a`, ו-`07a` הם העתקים של קבצי ה-API הרגילים, המותאמים לעבוד מול הרכיבים של ה-StatefulSet (למשל, הם מצביעים לשמות ה-Services וה-Routes החלופיים).